# ⚡ 快速启动指南 - 新架构版本

## 🎉 迁移已完成！

所有文件已经创建完成，现在可以立即运行新版本！

## 🚀 三种启动方式

### 方式 1: 双击启动脚本（最简单）⭐

```
双击文件: run_new_version.bat
```

### 方式 2: 命令行启动

打开 PowerShell 或 CMD，执行：

```bash
cd C:\Users\user\WindowScope
python -m src.main
```

### 方式 3: 从 src 目录启动

```bash
cd C:\Users\user\WindowScope\src
python main.py
```

## ✅ 5 分钟快速测试

### 第 1 步：打开记事本（测试窗口）

```
按 Win + R
输入: notepad
按回车
在记事本中输入一些文字
```

### 第 2 步：启动新版本程序

```
双击: run_new_version.bat
```

你会看到：
```
========================================
实时窗口监视器 v2.1 - 新架构版本
========================================

正在启动...

[INFO] ============================================================
[INFO] 🎥 实时窗口监视器 v2.1.0 启动
[INFO] Python 版本: 3.x.x
[INFO] 调试模式: 开启
[INFO] 功能: 实时视频流监视，可调节帧率 (1-60 FPS)
[INFO] ============================================================
[INFO] PyQt6 应用程序已创建
[INFO] 主窗口已初始化
[INFO] 主窗口已显示，等待用户选择窗口...
```

### 第 3 步：选择窗口

1. 在下拉列表选择 **"记事本"**
2. 点击 **"🎯 图形化选择区域"** 按钮

### 第 4 步：选择区域

1. 区域选择器窗口打开，显示记事本的截图
2. 用鼠标拖拽选择文本编辑区域
3. 或者点击 **"📺 选择整个窗口"**
4. 点击 **"✅ 确认选择"**

### 第 5 步：启动监视

1. 返回主窗口，看到 "✅ 已选择区域: ..."
2. 点击 **"🚀 启动监视"** 按钮

### 第 6 步：观察效果 ✨

你会看到：

1. 🎬 监视窗口打开（在主窗口右侧）
2. 📺 实时显示记事本的选定区域
3. 📊 底部显示：
   - `FPS: 29.8` - 实际帧率
   - `刷新率: [====] 30 FPS` - 滑块控制
   - `🟢 监视中...` - 状态
   - `方法: win32ui` - 捕获方法

### 第 7 步：测试功能

**在记事本中输入文字** → 监视窗口实时更新 ✅

**点击"⏸ 暂停"** → 画面停止 ✅

**点击"▶ 继续"** → 画面恢复 ✅

**拖动帧率滑块** → FPS 实时变化 ✅

**拖动监视窗口** → 可以移动 ✅

## 🎯 对比新旧版本

### 同时运行对比

**终端 1**（新版本）：
```bash
python -m src.main
```

**终端 2**（旧版本）：
```bash
python window_capture_pyqt6.py
```

### 观察差异

| 特性 | 旧版本 | 新版本 |
|------|--------|--------|
| **启动信息** | 简单 print | 彩色日志 ✨ |
| **代码结构** | 单文件 | 模块化 ✨ |
| **日志系统** | print | logger ✨ |
| **配置管理** | 硬编码 | settings ✨ |
| **架构** | 耦合 | 解耦 ✨ |

## 📊 日志输出示例

新版本的专业日志输出：

```
[INFO] ============================================================
[INFO] 🎥 实时窗口监视器 v2.1.0 启动
[INFO] Python 版本: 3.11.x
[INFO] 调试模式: 开启
[INFO] ============================================================
[DEBUG] 开始枚举窗口...
[DEBUG]   找到窗口: HWND=12345, 标题='记事本'
[DEBUG] 窗口枚举完成，共找到 50 个窗口
[DEBUG] 开始为窗口 '记事本' 截图...
[INFO] 截图成功: 800x600, 方法: win32ui
[DEBUG] 区域选择器已创建: 800x600
[INFO] 用户选择了区域: (50, 50, 400, 300)
[INFO] ************************************************************
[INFO] 用户启动实时监视:
[INFO]   选中窗口: '记事本'
[INFO]   HWND: 12345
[INFO]   裁剪参数: x=50, y=50, width=400, height=300
[INFO]   目标帧率: 30 FPS
[INFO] ************************************************************
[INFO] 捕获引擎已初始化: hwnd=12345, region=(50, 50, 400, 300), fps=30
[INFO] 监视窗口已创建: '记事本'
[INFO] 捕获引擎已启动，刷新间隔: 33ms (30 FPS)
[DEBUG] --- 第 1 帧 ---
[INFO] 捕获方法: win32ui
[DEBUG] ✓ 第 1 帧完成 (方法: win32ui, FPS: 0.0)

✅ 监视窗口已启动！
   窗口标题: 监视: 记事本
   位置: 主窗口右侧
   帧率: 30 FPS
   已启动监视窗口数: 1
```

## 🐛 如果遇到问题

### 问题 1: ModuleNotFoundError

**错误**: `ModuleNotFoundError: No module named 'src'`

**解决**:
```bash
# 确保在正确的目录
cd C:\Users\user\EVE\EVE-window-capture

# 使用 -m 参数运行
python -m src.main
```

### 问题 2: 导入错误

**错误**: `ImportError: attempted relative import`

**解决**: 确保使用 `-m src.main` 而不是 `python src/main.py`

### 问题 3: 没有日志输出

**检查**: `src/config/settings.py` 中的 `DEBUG = True`

### 问题 4: 监视窗口没有画面

**检查**:
1. 目标窗口没有最小化
2. 查看控制台日志
3. 检查捕获方法显示

## 📁 项目文件清单

确认以下文件都存在：

```
✅ src/config/__init__.py
✅ src/config/settings.py
✅ src/core/__init__.py
✅ src/core/capture_engine.py
✅ src/ui/__init__.py
✅ src/ui/region_selector.py
✅ src/ui/capture_window.py
✅ src/ui/main_window.py
✅ src/utils/__init__.py
✅ src/utils/logger.py
✅ src/utils/win32_helper.py
✅ src/__init__.py
✅ src/main.py
✅ requirements.txt
✅ run_new_version.bat
```

## 🎓 了解更多

- **项目架构说明.md** - 深入理解架构设计
- **README_新架构.md** - 完整使用文档
- **迁移完成报告.md** - 查看所有改进

## 🎉 享受新架构！

现在你拥有一个：
- ✅ 模块化的代码结构
- ✅ 专业的日志系统
- ✅ 清晰的架构设计
- ✅ 易于扩展的系统

**立即启动测试吧！** 🚀

```bash
双击: run_new_version.bat
```

或

```bash
python -m src.main
```

---

**有问题？** 查看日志输出，它会告诉你发生了什么！

